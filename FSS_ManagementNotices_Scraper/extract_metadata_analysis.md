# extract_metadata.py λ¶„μ„ κ²°κ³Ό

## π“‹ κ°μ”

`extract_metadata.py`λ” PDFμ—μ„ μ¶”μ¶ν• ν…μ¤νΈ λ‚΄μ©μ—μ„ κΈμµνμ‚¬λ…, μ μ¬μ΅°μΉμΌ, μ μ¬λ‚΄μ©, μ‚¬κ±΄ μ λ©/λ‚΄μ©μ„ μ¶”μ¶ν•λ” λ¨λ“μ…λ‹λ‹¤.

---

## π” μ£Όμ” μ¶”μ¶ ν•¨μ 3κ°€μ§€

### 1οΈβƒ£ `extract_metadata_from_content()` - κΈμµνμ‚¬λ… & μ μ¬μ΅°μΉμΌ

#### μ¶”μ¶ κ°€λ¥ν• ν¨ν„΄

**κΈμµνμ‚¬λ… (1λ² ν•­λ©):**
```
1. κΈμµκΈ°κ΄€λ…: ν…μ¤νΈμ€ν–‰
1. κΈμµνμ‚¬λ“± λ… : ν„λ€μ°¨μ¦κ¶
1. κΈ°κ΄€λ… : μ‚Όμ„±μ¦κ¶
```

**μ μ¬μ΅°μΉμΌ (2λ² ν•­λ©):**
```
2. μ μ¬μ΅°μΉμΌ: 2024. 5. 15.
2. μ μ¬μ΅°μΉ μΌμ : 2025. 10. 15.
2. μ΅°μΉμΌ : 2025-12-03
```

**μ¬μ΅°μΉ ν¨ν„΄ (μ°μ„  μμ„ λ†’μ):**
```
β…Ά. μ¬μ΅°μΉ λ‚΄μ©
1. μ¬μ΅°μΉμΌμ: 2025. 10. 15.
μ¬μ΅°μΉ μΌμ : 2025. 10. 15.
```

#### μ¶”μ¶ κ²°κ³Ό
```python
("ν…μ¤νΈμ€ν–‰", "2024-05-15")  # tuple ν•νƒ, λ‚ μ§λ” YYYY-MM-DDλ΅ μλ™ λ³€ν™
```

---

### 2οΈβƒ£ `extract_sanction_details()` - μ μ¬μ΅°μΉλ‚΄μ© (ν‘ λ°μ΄ν„°)

#### μ¶”μ¶ κ°€λ¥ν• ν¨ν„΄

**μΌλ° μ μ¬μ΅°μΉλ‚΄μ© (3λ² ν•­λ©):**
```
3. μ μ¬μ΅°μΉλ‚΄μ©
λ€μƒμ    μ΅°μΉλ‚΄μ©    κ·Όκ±°λ²•λ Ή    <- μ λ©ν–‰ (μ μ™Έλ¨)
ν™κΈΈλ™    κ²½κ³         μκΈμ„Ένƒλ°©μ§€λ²• μ 5μ΅°
κΉ€μ² μ    μ£Όμ        μκΈμ„Ένƒλ°©μ§€λ²• μ 7μ΅°
```

**μ΅°μΉλ‚΄μ© ν¨ν„΄:**
```
3. μ΅°μΉλ‚΄μ©
κΈ° κ΄€    κ³Όνƒλ£ 220,200,000 μ› λ¶€κ³Ό
```

**μ¬μ΅°μΉ ν¨ν„΄ (μ°μ„  μμ„ λ†’μ):**
```
β…Ά. μ¬μ΅°μΉ λ‚΄μ©
μ¬μ΅°μΉ λ€μƒμ λ° μ μ¬μΆ…λ¥
β—¦ ν™κΈΈλ™ - κ²½κ³ 
β—¦ κΉ€μ² μ - μ£Όμ

λλ”

λ€μƒμ λ° μ¬μ΅°μΉλ‚΄μ©
β–΅ ν™κΈΈλ™ - κ²½κ³ 
β–΅ κΉ€μ² μ - μ£Όμ
```
- β οΈ **μ΄ ν¨ν„΄μ€ μ¶”μ¶μ—μ„ μ μ™Έλ¨** (λΉ λ¬Έμμ—΄ λ°ν™)

#### μ¶”μ¶ κ²°κ³Ό (μΌλ° μ μ¬μ΅°μΉλ‚΄μ© ν¨ν„΄)
```
ν™κΈΈλ™    κ²½κ³         μκΈμ„Ένƒλ°©μ§€λ²• μ 5μ΅°
κΉ€μ² μ    μ£Όμ        μκΈμ„Ένƒλ°©μ§€λ²• μ 7μ΅°
```
- μ λ©ν–‰μ€ μ μ™Έλ¨
- νμ΄μ§€ λ²νΈ (`- 1 -`, `- 2 -` λ“±) μλ™ μ κ±°
- ν‘ μ΄ν›„ ν…μ¤νΈ (`*μ΅°μΉμ‚¬μ `, `*μ μ¬μ‚¬μ ` λ“±) μ κ±°

---

### 3οΈβƒ£ `extract_incidents()` - μ‚¬κ±΄ μ λ©/λ‚΄μ© (4λ² ν•­λ©)

#### μ¶”μ¶ κ°€λ¥ν• ν¨ν„΄

##### π“ ν¨ν„΄ 1: κΈ°λ³Έ ν•νƒ (κ°€. λ‚. λ‹¤.)
```
4. μ μ¬λ€μƒμ‚¬μ‹¤
κ°€. μκΈμ„Ένƒλ°©μ§€μλ¬΄ μ„λ°
κ³ κ°ν™•μΈμλ¬΄λ¥Ό μ΄ν–‰ν•μ§€ μ•κ³  κ±°λλ¥Ό μ§„ν–‰ν•¨
λ‚. μμ‹¬κ±°λλ³΄κ³ μλ¬΄ μ„λ°
μμ‹¬κ±°λλ¥Ό λ³΄κ³ ν•μ§€ μ•μ
```

**μ¶”μ¶ κ²°κ³Ό:**
```python
{
    'μ λ©1': 'μκΈμ„Ένƒλ°©μ§€μλ¬΄ μ„λ°',
    'λ‚΄μ©1': 'κ³ κ°ν™•μΈμλ¬΄λ¥Ό μ΄ν–‰ν•μ§€ μ•κ³  κ±°λλ¥Ό μ§„ν–‰ν•¨',
    'μ λ©2': 'μμ‹¬κ±°λλ³΄κ³ μλ¬΄ μ„λ°',
    'λ‚΄μ©2': 'μμ‹¬κ±°λλ¥Ό λ³΄κ³ ν•μ§€ μ•μ'
}
```

##### π“ ν¨ν„΄ 2: μ¤‘μ²© ν•νƒ - "λ¬Έμ±…μ‚¬ν•­" λ“± νΉμ ν‚¤μ›λ“
```
4. μ΅°μΉλ€μƒμ‚¬μ‹¤
κ°€. λ¬Έμ±…μ‚¬ν•­
(1) κµ­μ  λ° μ‹¤μ  μ†μ μ λ―Έν™•μΈ
β–΅ κΈμµνμ‚¬λ“±μ€ κ³„μΆλ¥Ό μ‹ κ· κ°μ„¤ν•λ” κ²½μ°...
(2) κ³ μ„ν— κ³ κ°μ— λ€ν• μ¶”κ°€μ •λ³΄ λ―Έν™•μΈ
β–΅ κΈμµνμ‚¬λ“±μ€ κ³ κ°μ΄ μκΈμ„Ένƒν–‰μ„λ¥Ό ν•  μ°λ ¤κ°€...
```

**μ¶”μ¶ κ²°κ³Ό:**
```python
{
    'μ λ©1': 'κµ­μ  λ° μ‹¤μ  μ†μ μ λ―Έν™•μΈ',
    'λ‚΄μ©1': 'β–΅ κΈμµνμ‚¬λ“±μ€ κ³„μΆλ¥Ό μ‹ κ· κ°μ„¤ν•λ” κ²½μ°...',
    'μ λ©2': 'κ³ μ„ν— κ³ κ°μ— λ€ν• μ¶”κ°€μ •λ³΄ λ―Έν™•μΈ',
    'λ‚΄μ©2': 'β–΅ κΈμµνμ‚¬λ“±μ€ κ³ κ°μ΄ μκΈμ„Ένƒν–‰μ„λ¥Ό ν•  μ°λ ¤κ°€...'
}
```

**νΉμ ν‚¤μ›λ“:** `λ¬Έμ±…`, `μ±…μ„`, `μμ¨μ²λ¦¬`, `μ£Όμ`, `κ²½μμ μ`, `κ²½μμ μμ‚¬ν•­`, `κ°μ„ μ‚¬ν•­`
- μ΄ ν‚¤μ›λ“κ°€ μμΌλ©΄ κ° `(1)`, `(2)`λ¥Ό **λ³„λ„ μ‚¬κ±΄**μΌλ΅ μ²λ¦¬
- **μ ‘λ‘μ‚¬ μ κ±°**: νΉμ ν‚¤μ›λ“λ” μ λ©μ μ ‘λ‘μ‚¬λ΅ μ‚¬μ©λμ§€ μ•μ (μ: "λ¬Έμ±…μ‚¬ν•­ - μ λ©" β†’ "μ λ©")

##### π“ ν¨ν„΄ 3: μ¤‘μ²© ν•νƒ - μΌλ° μ λ© (ν†µν•© λ¨λ“)
```
4. μ΅°μΉλ€μƒμ‚¬μ‹¤
κ°€. κ³ κ°ν™•μΈ μλ¬΄ μ„λ°
(1) κµ­μ  λ―Έν™•μΈ
...
(2) μ¶”κ°€μ •λ³΄ λ―Έν™•μΈ
...
```

**μ¶”μ¶ κ²°κ³Ό:**
```python
{
    'μ λ©1': 'κ³ κ°ν™•μΈ μλ¬΄ μ„λ°',
    'λ‚΄μ©1': '(1) κµ­μ  λ―Έν™•μΈ\n...\n(2) μ¶”κ°€μ •λ³΄ λ―Έν™•μΈ\n...'
}
```
- νΉμ ν‚¤μ›λ“κ°€ **μ—†μΌλ©΄** λ¨λ“  `(1)`, `(2)`λ¥Ό **ν•λ‚μ μ‚¬κ±΄**μΌλ΅ ν†µν•©

##### π“ ν¨ν„΄ 4: λ°”λ΅ λ²νΈ μ‹μ‘ (κ°€. ν¨ν„΄ μ—†μ)
```
4. μ΅°μΉλ€μƒμ‚¬μ‹¤
(1) κ³ κ°ν™•μΈ μ—…λ¬΄ μ²΄κ³„ λ―Έν΅
κ³ κ°ν™•μΈ μ—…λ¬΄μ μ°¨λ¥Ό λ§λ ¨ν•μ—¬ μ΄μ©ν•κ³  μμΌλ‚...
(2) μμ‹¬μ¤λ¬μ΄ κ±°λ λ¨λ‹ν„°λ§ μ²΄κ³„ λ―Έν΅
μμ‹¬κ±°λ μ¶”μ¶κΈ°μ¤€μ μ ν¨μ„±μ΄ λ―Έν΅ν•λ©°...
```

**μ¶”μ¶ κ²°κ³Ό:**
```python
{
    'μ λ©1': 'κ³ κ°ν™•μΈ μ—…λ¬΄ μ²΄κ³„ λ―Έν΅',
    'λ‚΄μ©1': 'κ³ κ°ν™•μΈ μ—…λ¬΄μ μ°¨λ¥Ό λ§λ ¨ν•μ—¬ μ΄μ©ν•κ³  μμΌλ‚...',
    'μ λ©2': 'μμ‹¬μ¤λ¬μ΄ κ±°λ λ¨λ‹ν„°λ§ μ²΄κ³„ λ―Έν΅',
    'λ‚΄μ©2': 'μμ‹¬κ±°λ μ¶”μ¶κΈ°μ¤€μ μ ν¨μ„±μ΄ λ―Έν΅ν•λ©°...'
}
```

##### π“ ν¨ν„΄ 5: 3λ‹¨κ³„ μ¤‘μ²© (κ°€. (1) (κ°€) (λ‚))
```
4. μ΅°μΉλ€μƒμ‚¬μ‹¤
κ°€. λ¬Έμ±…μ‚¬ν•­
(1) ν¬μμ λ³΄νΈμλ¬΄ μ„λ°
(κ°€) κ³ κ° μ •λ³΄ λ―Έν™•μΈ
β–΅ κΈμµνμ‚¬λ”...
(λ‚) λ¶€μ ν•© μƒν’ νλ§¤
β–΅ κΈμµνμ‚¬λ”...
```

**μ¶”μ¶ κ²°κ³Ό:**
```python
{
    'μ λ©1': 'ν¬μμ λ³΄νΈμλ¬΄ μ„λ°',
    'λ‚΄μ©1': '(κ°€) κ³ κ° μ •λ³΄ λ―Έν™•μΈ\nβ–΅ κΈμµνμ‚¬λ”...\n(λ‚) λ¶€μ ν•© μƒν’ νλ§¤\nβ–΅ κΈμµνμ‚¬λ”...'
}
```
- `(κ°€)`, `(λ‚)`λ” μ λ©μ΄ μ•„λ‹ **λ‚΄μ©**μΌλ΅ μ²λ¦¬λ¨

##### π“ ν¨ν„΄ 6: μ¬μ΅°μΉ ν¨ν„΄
```
β…Ά. μ¬μ΅°μΉ λ‚΄μ©
2. μ¬μ΅°μΉλ€μƒμ‚¬μ‹¤
κ°€. λ¬Έμ±…μ‚¬ν•­
(1) ...
```

---

## π― μ§€μ›ν•λ” 4λ² ν•­λ© μ λ© ν¨ν„΄

```python
"4. μ μ¬λ€μƒμ‚¬μ‹¤"
"4. μ΅°μΉλ€μƒμ‚¬μ‹¤"
"4. μ μ¬μ΅°μΉμ‚¬μ "
"4. μ μ¬μ‚¬μ "
"4. μ΅°μΉμ‚¬μ "
"4. μ„λ°λ‚΄μ©"
"4. μ‚¬μ "

"β…£. μ μ¬λ€μƒμ‚¬μ‹¤"  # λ΅λ§μ«μ
"β…£. μ΅°μΉλ€μƒμ‚¬μ‹¤"
...
```

---

## π§Ή μλ™ μ „μ²λ¦¬ κΈ°λ¥

1. **νμ΄μ§€ λ²νΈ μ κ±°**: `- 1 -`, `- 2 -` λ“±
2. **λ‚ μ§ ν•μ‹ ν†µμΌ**: `2024. 5. 15.` β†’ `2024-05-15`
3. **κΈ°νΈ μ κ±°**: `β—¦`, `β—‹`, `β–΅` λ“± (μ μ¬λ‚΄μ© μ¶”μ¶ μ‹)
4. **κ³µλ°± μ •λ¦¬**: μ•λ’¤ κ³µλ°± μ κ±°

---

## π“ μ‹¤μ  μ‚¬μ© μμ‹

```python
from extract_metadata import (
    extract_metadata_from_content,
    extract_sanction_details,
    extract_incidents
)

# PDFμ—μ„ μ¶”μ¶ν• ν…μ¤νΈ
pdf_text = "..."

# 1. λ©”νƒ€λ°μ΄ν„° μ¶”μ¶
institution, sanction_date = extract_metadata_from_content(pdf_text)
# β†’ ("κµλ³΄μƒλ…λ³΄ν—γ", "2025-12-03")

# 2. μ μ¬λ‚΄μ© μ¶”μ¶
sanction_details = extract_sanction_details(pdf_text)
# β†’ "κΈ° κ΄€    κ°μ„ μ‚¬ν•­ 3κ±΄"

# 3. μ‚¬κ±΄ μ¶”μ¶
incidents = extract_incidents(pdf_text)
# β†’ {
#     'μ λ©1': 'κ³ κ°ν™•μΈ μ—…λ¬΄ μ²΄κ³„ λ―Έν΅',
#     'λ‚΄μ©1': '...',
#     'μ λ©2': 'μμ‹¬μ¤λ¬μ΄ κ±°λ λ¨λ‹ν„°λ§ μ²΄κ³„ λ―Έν΅',
#     'λ‚΄μ©2': '...'
# }
```

---

## π”‘ ν•µμ‹¬ λ΅μ§ μ”μ•½

### μ‚¬κ±΄ μ¶”μ¶ λ΅μ§ (`extract_incidents`)

1. **"κ°€." ν¨ν„΄ ν™•μΈ**: λ¬Έμ„μ— "κ°€. μ λ©" ν¨ν„΄μ΄ μλ”μ§€ ν™•μΈ
2. **μ§μ ‘ λ²νΈ ν¨ν„΄ ν™•μΈ**: "κ°€." μ—†μ΄ λ°”λ΅ "(1)"λ΅ μ‹μ‘ν•λ”μ§€ ν™•μΈ
3. **νΉμ ν‚¤μ›λ“ ν™•μΈ**: 
   - `λ¬Έμ±…`, `μ±…μ„`, `μμ¨μ²λ¦¬`, `μ£Όμ`, `κ²½μμ μ`, `κ°μ„ μ‚¬ν•­` λ“±μ΄ μμΌλ©΄ β†’ κ° `(1)`, `(2)`λ¥Ό **λ³„λ„ μ‚¬κ±΄**μΌλ΅ μ²λ¦¬
   - μ—†μΌλ©΄ β†’ λ¨λ“  `(1)`, `(2)`λ¥Ό **ν•λ‚μ μ‚¬κ±΄**μΌλ΅ ν†µν•©
4. **ν•μ„ ν•­λ© μ²λ¦¬**: `(κ°€)`, `(λ‚)` λ“±μ€ μ λ©μ΄ μ•„λ‹ **λ‚΄μ©**μΌλ΅ μ²λ¦¬

### μ°μ„ μμ„ μ²λ¦¬

1. **μ¬μ΅°μΉ ν¨ν„΄ μ°μ„ **: "β…Ά. μ¬μ΅°μΉ λ‚΄μ©" μ„Ήμ…μ΄ μμΌλ©΄ μΌλ° ν¨ν„΄λ³΄λ‹¤ μ°μ„  μ²λ¦¬
2. **λ΅λ§μ«μ ν¨ν„΄**: "β…£. μ μ¬λ€μƒμ‚¬μ‹¤" λ“± λ΅λ§μ«μ ν¨ν„΄λ„ μ§€μ›
3. **OCR ν…μ¤νΈ λ€μ‘**: κ³µλ°±μ΄ μ‚½μ…λ OCR ν…μ¤νΈλ„ μ²λ¦¬ κ°€λ¥ (μ: "κ°€ . λ¬Έ μ±… μ‚¬ ν•­")

---

## π“ μ°Έκ³ μ‚¬ν•­

- μ½”λ“ ν•λ‹¨μ `if __name__ == "__main__":` μ„Ήμ…μ— 3κ°€μ§€ ν…μ¤νΈ μΌ€μ΄μ¤κ°€ ν¬ν•¨λμ–΄ μμ
- ν…μ¤νΈ μ‹¤ν–‰ μ‹ κ° ν¨ν„΄λ³„ μ¶”μ¶ κ²°κ³Όλ¥Ό ν™•μΈν•  μ μμ
- OCR ν…μ¤νΈ μ „μ²λ¦¬λ” `post_process_ocr.py`μ—μ„ μν–‰λ¨

